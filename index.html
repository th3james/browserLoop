<!doctype html>
<html>
  <head>
    <title>Browser Loop</title>
    <link charset="utf-8" rel="stylesheet" type="text/css" href="css/style.css" />
    <link charset="utf-8" rel="stylesheet" type="text/css" href="css/range.css" />
    <link href='http://fonts.googleapis.com/css?family=Julius+Sans+One|Merriweather+Sans|Oxygen' rel='stylesheet' type='text/css'>

    <script src="js/lib/jquery-1.9.1.min.js"></script>
    <script src="js/lib/json2.js"></script>
    <script src="js/lib/underscore-min.js"></script>
    <script src="js/lib/backbone-min.js"></script>
    <script src="js/lib/handlebars.js"></script>

    <script src="js/lib/fd-slider.min.js"></script>

    <script src="js/lib/diorama.js"></script>

    <script src="js/application.js"></script>
    <script type="text/javascript">
      window.LOOP_OVERLAP_MS = 43;

      $(document).ready(function(){
        // Add the loops

        var drumsLoopCollection = new Backbone.Collections.LoopCollection([
          {name: 'Verse', length: 2, fileName: 'XEVerseDrums'},
          {space: true},
          {name: 'Chorus', fileName: 'XEChorusDrums'},
          {name: 'Middle 8', fileName: 'XEMidDrums'}
        ]);
        var drums = new Backbone.Views.TrackView({name: 'Drums', collection: drumsLoopCollection});
        $('#tracks').append(drums.el);

        var jamesGuitarLoopCollection = new Backbone.Collections.LoopCollection([
          {name: 'Verse', length: 2, fileName: 'XEVrs1James'},
          {name: 'Verse 2', length: 2, fileName: 'XEVrs2James'},
          {name: 'Chorus', length: 2, fileName: 'XEChorusJames'},
          {name: 'Middle 8', length: 2, fileName: 'XEMidJames'}
        ]);
        var james = new Backbone.Views.TrackView({name: 'Guitar 1', collection: jamesGuitarLoopCollection});
        $('#tracks').append(james.el);

        var keysLoopCollection = new Backbone.Collections.LoopCollection([
          {space: true},
          {name: 'Noise', length: 8, fileName: 'XE2ndVerseNoise'},
          {name: 'Chorus', fileName: 'XEChorusKeys'},
          {name: 'Glass', length: 2, fileName: 'XEGlassSmash'},
        ]);
        var keys = new Backbone.Views.TrackView({name: 'Synth', collection: keysLoopCollection});
        $('#tracks').append(keys.el);

        var bassLoopCollection = new Backbone.Collections.LoopCollection([
          {name: 'Verse', length: 16, fileName: 'XEVerseBass'},
          {space: true},
          {name: 'Chorus', length: 16, fileName: 'XEChorusBass'},
          {name: 'Middle8', length: 2, fileName: 'XEMidBass'}
        ]);
        var bass = new Backbone.Views.TrackView({name: 'Bass', collection: bassLoopCollection});
        $('#tracks').append(bass.el);

        var robGuitarCollection = new Backbone.Collections.LoopCollection([
          {name: 'Verse', length: 8, fileName: 'XEVrsRob'},
          {space: true},
          {name: 'Chorus', length: 8, fileName: 'XEChorusRob'},
          {name: 'Chorus 2', length: 8, fileName: 'XEChorusRob3'},
          {name: 'Middle 8', length: 2, fileName: 'XERobMidNoise'}
        ]);
        var rob = new Backbone.Views.TrackView({name: 'Guitar 2', collection: robGuitarCollection});
        $('#tracks').append(rob.el);

        var voxCollection = new Backbone.Collections.LoopCollection([
          {name: 'Verse 1', length: 16, fileName: 'XEVrs1Vox'},
          {name: 'Verse 2', length: 16, fileName: 'XEVrs2Vox'},
          {name: 'Chorus', length: 16, fileName: 'XEChorusVox'},
          {name: 'Verse 3', length: 16, fileName: 'XEVrs3Vox'},
          {name: 'Verse 4', length: 16, fileName: 'XEVrs4Vox'}
        ]);
        var vox = new Backbone.Views.TrackView({name: 'Vocals', collection: voxCollection});
        $('#tracks').append(vox.el);

        // Start the clock
        theClock = new Clock();
        theClock.play();

        $('#loop-overlay').val(window.LOOP_OVERLAP_MS);
        $('#loop-overlay-amount').html(window.LOOP_OVERLAP_MS);
        $('#loop-overlay').on('change', window.updateOverlay);

        buildSomeSceneViews(5);

        $('#stop-all').click(stopAllClips);

        var isIE = /*@cc_on!@*/false;

        if (isMobileBrowser()) {
          $('#messages').slideDown();
          $('#mobile-device-warning').slideDown();
        } else if (isIE) {
          $('#messages').slideDown();
          $('#ie-warning').slideDown();
          $('#ie-let-me-try').click(function() {
            $('#messages').slideUp();
          });
        }

        fdSlider.onDomReady()
      });
    </script>

    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-20315709-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </head>
  <body>
    <div id='header'>
      <h2>BARCODE<br/>CHANNEL</h2>
      <h1>CROSSEYED</h1>
    </div>
    <p>
      To celebrate the release of our new single 'Crosseyed', we've built a tool which allows you to remix the track in your browser.
      Get stuck in below, if you want hear original track, <a href="http://barcodechannel.bandcamp.com">stream or download it on our bandcamp</a>.
    </p>
    <ul id='tracks' class="green-border-box">
    </ul>
    <ul id='scenes' class='loops'>
      <li id="stop-area">
        <button id='stop-all' class='play'><img src='img/stop-button.png'/></button>
        <h4>Stop all clips</h4>
      </li>
    </ul>
    <div id='overlay-controls' class="green-border-box">
      <p>Audio not looping smoothly? Adjust the overlay:</p>
      <div>
        <span id='loop-overlay-amount'></span>ms
      </div>
      <div id='overlay-slider'>
        <input id='loop-overlay' type='range' min='0' max='200'/>
      </div>
    </div>
    <div id='messages'>
      <div id='disabler'>
      </div>
      <div id='mobile-device-warning' class="green-border-box">
        <h2>Hi there, sorry about this..</h2>
        <p>We've got a really cool toy we wanted to show you where you can remix our new single in your browser. Unfortunately, mobile devices don't currently support the clever bits it needs to work.</p>
        <p>If you can, give this site a go on a desktop computer (we promise it's worth it!).</p>
        <p><a href="http://barcodechannel.com">Go to BarcodeChannel.com instead</a></p>
      </div>
      <div id='ie-warning' class="green-border-box">
        <h2>Hi there, Internet Explorer user</h2>
        <p>Unfortunately, your web browser doesn't really support the technology needed for this site to work properly. Expect odd behavior.</p>
        <p>For the web experience, try this site in Google Chrome, Safari, or Firefox (we promise it's worth it!).</p>
        <p><a id='ie-let-me-try' href="#">Understood, I want to try it in IE anyway</a></p>
        <p><a href="http://barcodechannel.com">Go to BarcodeChannel.com instead</a></p>
      </div>
    </div>
    <div id='footer'>
      <div id="the-left">
        <div id="about-box">
          <h4>About Us</h4>
          <p>Hi there. We are Barcode Channel, a 3-piece from Cambridge fusing straight up post-punk like LCD Soundsystem and Bloc Party with more electronic influences like SBTRKT and Radiohead's Kid A </p>
          <p>We work by combining angular guitars with a laptop for beats, samples and synths, working strictly DIY and taking on all the production and recording duties ourselves. While not being the easiest path (and having quite a learning curve!), it's key to shaping our sound. Coupled with drawing influences from a wide range of genres (from Rustie to Wu-Tang), we hope to create something a little different.</p>
        </div>
        <div id="contact-box">
          <h4>Contact</h4>
          <p>Want to get hold of us? <a href="mailto:barcodechannel.com">barcodechannel@gmail.com</a></p>
        </div>
      </div>

      <div id="links-box">
        <h4>Other pages</h4>
        <ul id="ext-links">
          <a href="http://barcodechannel.bandcamp.com"><li><span class="logo"><img alt="Bandcamp" src="http://barcodechannel.com/assets/bandcamp.png"></span><span>Bandcamp</span></li></a>
          <a href="https://soundcloud.com/barcode-channel"><li><span class="logo"><img alt="Soundcloud" src="http://barcodechannel.com/assets/soundcloud.png"></span><span>Soundcloud</span></li></a>
          <a href="http://open.spotify.com/artist/7FAnCQ048ShWWphmIuBFkz"><li><span class="logo"><img alt="Spotify" src="http://barcodechannel.com/assets/spotify.png"></span><span>Spotify</span></li></a>
          <a href="https://itunes.apple.com/gb/artist/barcode-channel/id420554385"><li><span class="logo"><img alt="Itunes" src="http://barcodechannel.com/assets/itunes.png"></span><span>iTunes</span></li></a>
          <a href="http://www.youtube.com/user/BarcodeChannel?feature=watch"><li><span class="logo"><img alt="Youtube" src="http://barcodechannel.com/assets/youtube.png"></span><span>YouTube</span></li></a>
          <a href="http://www.facebook.com/pages/Barcode-Channel/126967277330061"><li><span class="logo"><img alt="Facebook" src="http://barcodechannel.com/assets/facebook.png"></span><span>Facebook</span></li></a>
        </ul>
      </div>

    </div>
  </body>
</html>
