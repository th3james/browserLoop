<!doctype html>
<html>
  <head>
    <title>Browser Loop</title>
    <link charset="utf-8" rel="stylesheet" type="text/css" href="css/style.css" />
    <link href='http://fonts.googleapis.com/css?family=Julius+Sans+One|Merriweather+Sans|Oxygen' rel='stylesheet' type='text/css'>

    <script src="js/lib/jquery-1.8.3.min.js"></script>
    <script src="js/lib/json2.js"></script>
    <script src="js/lib/underscore-min.js"></script>
    <script src="js/lib/backbone-min.js"></script>
    <script src="js/lib/html5slider.js"></script>

    <script src="js/lib/diorama.js"></script>

    <script src="js/application.js"></script>
    <script type="text/javascript">
      window.LOOP_OVERLAP_MS = 43;

      $(document).ready(function(){
        // Add the loops

        var drumsLoopCollection = new Backbone.Collections.LoopCollection([
          {name: 'Verse', length: 2, loopUrl: 'audio/XEVerseDrums.theora.ogv'},
          {space: true},
          {name: 'Chorus', loopUrl: 'audio/XEChorusDrums.theora.ogv'},
          {name: 'Middle 8', loopUrl: 'audio/XEMidDrums.theora.ogv'}
        ]);
        var drums = new Backbone.Views.TrackView({name: 'Drums', collection: drumsLoopCollection});
        $('#tracks').append(drums.el);

        var jamesGuitarLoopCollection = new Backbone.Collections.LoopCollection([
          {name: 'Verse', length: 2, loopUrl: 'audio/XEVrs1James.theora.ogv'},
          {name: 'Verse 2', length: 2, loopUrl: 'audio/XEVrs2James.theora.ogv'},
          {name: 'Chorus', length: 2, loopUrl: 'audio/XEChorusJames.theora.ogv'},
          {name: 'Middle 8', length: 2, loopUrl: 'audio/XEMidJames.theora.ogv'}
        ]);
        var james = new Backbone.Views.TrackView({name: 'Guitar 1', collection: jamesGuitarLoopCollection});
        $('#tracks').append(james.el);

        var keysLoopCollection = new Backbone.Collections.LoopCollection([
          {name: 'Noise', length: 8, loopUrl: 'audio/XE2ndVerseNoise.theora.ogv'},
          {name: 'Chorus', loopUrl: 'audio/XEChorusKeys.theora.ogv'},
          {name: 'Glass', length: 2, loopUrl: 'audio/XEGlassSmash.theora.ogv'},
        ]);
        var keys = new Backbone.Views.TrackView({name: 'Synth', collection: keysLoopCollection});
        $('#tracks').append(keys.el);

        var bassLoopCollection = new Backbone.Collections.LoopCollection([
          {name: 'Verse', length: 16, loopUrl: 'audio/XEVerseBass.theora.ogv'},
          {name: 'Chorus', length: 16, loopUrl: 'audio/XEChorusBass.theora.ogv'},
          {name: 'Middle8', length: 2, loopUrl: 'audio/XEMidBass.theora.ogv'}
        ]);
        var bass = new Backbone.Views.TrackView({name: 'Bass', collection: bassLoopCollection});
        $('#tracks').append(bass.el);

        var robGuitarCollection = new Backbone.Collections.LoopCollection([
          {name: 'Verse', length: 8, loopUrl: 'audio/XEVrsRob.theora.ogv'},
          {name: 'Chorus', length: 8, loopUrl: 'audio/XEChorusRob.theora.ogv'},
          {name: 'Chorus 2', length: 8, loopUrl: 'audio/XEChorusRob2.theora.ogv'},
          {name: 'Chorus 3', length: 8, loopUrl: 'audio/XEChorusRob3.theora.ogv'},
          {name: 'Middle 8', length: 8, loopUrl: 'audio/XERobMidNoise.theora.ogv'}
        ]);
        var rob = new Backbone.Views.TrackView({name: 'Guitar 2', collection: robGuitarCollection});
        $('#tracks').append(rob.el);

        var voxCollection = new Backbone.Collections.LoopCollection([
          {name: 'Verse 1', length: 16, loopUrl: 'audio/XEVrs1Vox.theora.ogv'},
          {name: 'Verse 2', length: 16, loopUrl: 'audio/XEVrs2Vox.theora.ogv'},
          {name: 'Verse 3', length: 16, loopUrl: 'audio/XEVrs3Vox.theora.ogv'},
          {name: 'Verse 4', length: 16, loopUrl: 'audio/XEVrs4Vox.theora.ogv'},
          {name: 'Chorus', length: 16, loopUrl: 'audio/XEChorusVox.theora.ogv'}
        ]);
        var vox = new Backbone.Views.TrackView({name: 'Vocals', collection: voxCollection});
        $('#tracks').append(vox.el);

        // Start the clock
        theClock = new Clock();
        theClock.play();

        $('#loop-overlay').val(window.LOOP_OVERLAP_MS);
        $('#loop-overlay-amount').html(window.LOOP_OVERLAP_MS);
        $('#loop-overlay').on('change', window.updateOverlay);

        buildSomeSceneViews(5);
      });
    </script>
  </head>
  <body>
    <div id='header'>
      <h2>BARCODE<br/>CHANNEL</h2>
      <h1>CROSSEYED</h1>
    </div>
    <ul id='tracks'>
    </ul>
    <ul id='scenes' class='loops'>
    </ul>
    <div id='overlay-controls'>
      <p>Audio not looping smoothly? Adjust the overlay to taste.</p>
      <input id='loop-overlay' type='range' min='0' max='200'/>
      <span id='loop-overlay-amount'></span>ms
    </div>
  </body>
</html>
