<!doctype html>
<html>
  <head>
    <title>BackboneDiorama</title>
    <script src="js/lib/jquery-1.8.3.min.js"></script>
    <script src="js/lib/json2.js"></script>
    <script src="js/lib/underscore-min.js"></script>
    <script src="js/lib/backbone-min.js"></script>
    <script src="js/lib/html5slider.js"></script>

    <script src="js/lib/diorama.js"></script>

    <script src="js/application.js"></script>
    <script type="text/javascript">
      window.LOOP_OVERLAP_MS = 43;

      // TODO Temporary app init code to go here
      $(document).ready(function(){
        // Add the loops
        var noise = new Backbone.Views.LoopView({name: 'Looping noise', loopUrl: 'audio/ElectricSea-JamesLoopNoise.mp3'})
        $('body').append(noise.el);
        var guitars = new Backbone.Views.LoopView({name: 'James Chords', loopUrl: 'audio/ElectricSea-JamesChordsMain.mp3'})
        $('body').append(guitars.el);
        var drums = new Backbone.Views.LoopView({name: 'Drums', loopUrl: 'audio/ElectricSea-DrumLoop.mp3'})
        $('body').append(drums.el);
        var keys = new Backbone.Views.LoopView({name: 'Basic Keys', loopUrl: 'audio/ElectricSea-BasicKeys.mp3'})
        $('body').append(keys.el);
        var bass = new Backbone.Views.LoopView({name: 'Bass Guitar', loopUrl: 'audio/ElectricSea-MikeBass.mp3'})
        $('body').append(bass.el);

        // Start the clock
        theClock = new Clock();
        theClock.play();

        $('#loop-overlay').val(window.LOOP_OVERLAP_MS);
        $('#loop-overlay-amount').html(window.LOOP_OVERLAP_MS);
        $('#loop-overlay').on('change', function(e){
          window.LOOP_OVERLAP_MS = $(e.target).val();
          $('#loop-overlay-amount').html(window.LOOP_OVERLAP_MS);
        });
      });
    </script>
  </head>
  <body>
    <h1>Browser Loop!</h1>
    <p>Audio not looping smoothly? Adjust the overlay to taste.</p>
    <input id='loop-overlay' type='range' min='0' max='200'/>
    <span id='loop-overlay-amount'></span>ms
  </body>
</html>
